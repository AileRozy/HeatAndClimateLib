#### Heat&Climate Lib 1.6.1 for Minecraft 1.10.2 ####


# 前提Ver&Mod

・Minecraft1.10.2

・MincraftForge 1.10.2_12.18.3.2185 以上

### 注意事項! ###

・このMODは、正式版に移行しましたので、以下の対応は通常通り行います。
　　・不具合報告への対応と修正。
　　・他MOD連携の検討・実装開始
　　・マルチでの起動確認(基本的に開発と同ビルドのForge鯖で行います。)

・このMODは、前提MOD・本体MODを別々にDLして導入する構成になっています。
　こちらは　*** 前提MOD　*** です。

・前提MODですが、これ自体に色々な機能を搭載しています。
　コアモッド要素を含む様々なワールド改変要素を含みますので、テスト環境を作ってテストされることをお勧めします。

※マルチプレイについて

起動確認のみで、テストプレイ開始にはもうちょっとかかりそうです。
但しクラッシュレポートがあれば検証・修正はある程度出来ますので、ご報告などは気兼ねなくどうぞ。


# 使用方法

・MincraftForgeの導入後に作成されるmodsフォルダの中に、DLしたファイルを.jarファイルのまま置いてください。



# 配布DL先
 投稿フォーラム：http://forum.minecraftuser.jp/viewtopic.php?f=13&t=17657
 URL：http://defeatedcrow.jp/modwiki/HeatAndClimate


# 概要

AppleMilkTeaにあった熱源ブロック、乾燥や発酵のBiome条件など、散り散りバラバラだった環境参照要素を『座標毎のClimate値』として統一し、
バイオームや範囲内の環境要因ブロックによって変動させたり、Climate値を利用してレシピ処理や設置オブジェクトの変化を起こすMODです。

AMTの設置可能オブジェクトを更に発展させ、リアルタイムでの状態変化をより自由な配置で、汎用的に起こそうというものです。

その他、過去のMODで技術不足により断念したもの、追加はしたものの造りに納得していないものなども総合的に投入していく予定です。


※現時点で実装してある主な要素（仮実装も多く、各仕様はいずれ変更される可能性があります。）
　「ベース」とあるものは、前提MODだけでは要素としてはなにも追加されません。本体であるHaCMODを一緒に導入してお楽しみ下さい。

　―気候システム
　　　・周囲のバイオームとブロック構成によって決まる環境パラメータ
　　　・高温・低温でダメージが発生、防具の重要性が増すように
　　　・環境によっていろいろなものが自然変化する
　―より改良された、圧縮コンテナシリーズ
　―置ける食べ物システム改
　―気候からエネルギーを取り出して動力にする「トルクエネルギー」のシステム
　―気候利用作物のベース
　―プレイヤーインベントリの最上段9スロットに置いておくと発動する、チャームシリーズのベース
　―追加液体と液体クラフティング(醸造や発酵、鍋料理など)

※上記に加え、バニラ要素の改変を色々と搭載しています。
　多くはコンフィグでOFFにも出来ますので、お好みでご使用下さい。

　―(AMTからの引き継ぎ)跳躍ポーションで落下ダメージを無効化できる
　―(AMTから引き継ぎ)騎乗中モブにポーション効果を分け与える
　―一部のアイテムに鉱石辞書名を追加&鉱石辞書を使ったアナザーレシピの追加
　―気候によって変化するバニラの自然ブロック
　―高湿バイオームの地底には溶岩の代わりに水を生成
　―ツールチップの拡張(ツールの最大耐久値や採掘速度、防具の気候耐性値を表示)

　前提MODとして、上記の要素のベース部分や、追加を補助するための要素が含まれています。


AMT&アドオンシリーズの再構成という性質もあるので、AMTにあった要素の類似の物は追加されると思います。
但し移植ではなく、システムを手直しした一新となるため、勝手が同じとは限らない点ご留意下さい。


# 詳細

○気候システム！

このmodのメイン要素であり、modのあらゆる要素に関わります。

●基本の遊び方

　気候は「温度(HeatTier)」「湿度(Humidity)」「通気(Airflow)」の三要素です。
　Biomeの持つベース値と、範囲内(温度は5x5x5、他は3x3x3)のBlockの持つ変動要素から算出されます。
　確かめるには、「気候チェッカー」を右クリックでブロックに使用してください。

　この三要素が条件を満たす場所にブロックを置くと、そのブロックが設置された状態で色々と変化します。
　たとえば、リンゴ箱を焼いて焼きリンゴにするときは、
　通気が少ない屋内(リンゴ箱を地中に埋めてもOK)で、火のそばにリンゴ箱を置いて加熱すればOK。

●気候ダメージ

　高温/極低温の環境では、あらゆるモブ(プレイヤー含む)はダメージを受け続けます。
　通常環境ではハート半分でダメージは止まりますが、極限環境ではとどめを刺されます。
　ただし軽減方法が多くあるため、対策は簡単です。

　・防具やアクセサリーを身につける(金属よりは布や革の方が気候に強いです。)
　・(熱気の場合)火耐性ポーションでほぼ無効化できる
　・温度を相殺するブロックを置いて周囲の温度を調整する
　・(バイオームのベース気温の場合)日陰に入ることで気温を一段階緩和できる

　ダメージの有無は、体力ゲージの左あたりに出てくるハートマークで見分けられます。
　スリップダメージ/致死ダメージ有りの環境にいる場合、ハートのアイコンが変化します。

●バニラ仕様への気候の影響

　・寒冷気候では明るくても氷や雪が溶けず、温暖では溶けるように
　・一定以下の気温では自然に氷ができはじめる
　・寒冷では作物が育ちづらく、WARM気候では早く育つ
　・気温WARMかつ湿度WET(ジャングルなど)では、雑草が勝手に伸びる

●各要素について

　それぞれの要素の物を配置して、周囲の気候を調整できます。

・温度

　　12段階のTierで定義されます。

　　高温のバイオーム：砂漠、ジャングル、ネザーなど
　　低温のバイオーム：タイガ、雪原、エンドなど

　　高温のブロック：火、溶岩、稼働中のかまど、燃焼チャンバー、たいまつやジャックオーランタンなど
　　低温のブロック：氷、氷塊など

　　バイオームとブロックで、温度の変動仕様が異なります。
　　バイオームの場合：
　　　・屋根の下では1段階気温がやわらぎ、NORMALに近づく
　　　・雨が直接当たる条件では気温が1段階下がり、晴天が10日前後続くと日照りにより気温が一段階上がる
　　　・高度100以上では気温が1段階下がる

　　ブロックの場合：
　　　・熱源の影響範囲は熱源から2ブロック先まで
　　　・熱源との間に断熱効果のあるブロック(木材や羊毛、レンガ、スポンジなど)があるとTierが下がる

　　※範囲内の最も高温の要素を最も低温の要素で相殺し、得られる値がその範囲の気温になります。重ね置きは意味がありません。
　　　そのため、現状-4以下の低温要素がないので、低温にする方向の調整は高温より困難です。

・湿度

　　3段階のTierと、水没判定で定義されます。
　　雨天により湿度が上昇します。

　　高湿度のバイオーム：ジャングル、沼地など
　　乾燥のバイオーム：砂漠、サバンナ、ネザーなど

　　高湿度のブロック：水、しめったスポンジなど
　　乾燥のブロック：乾いたスポンジなど

　　※高湿判定と乾燥判定の数は互いに相殺します。
　　※水没して周囲にAirのない状況は特にUNDERWATERとなり、水没判定に使われます。

・通気

　　4段階のTierで定義されます。

　　風の強いバイオーム：山岳
　　風のないバイオーム：ネザーなど、空がないディメンション

　　※通気のみ判定が特殊で、範囲内の空気ブロックの数といくつか環境要因で判定されます。
　　　　空が見える条件→FLOW　見えない(屋内判定)→NORMAL(バイオーム依存)
　　　　雨天時に屋外にある→WIND
　　　　風を起こす装置がある→WIND
　　　　Y=140以上→WIND
　　　　空気ブロックが2個以下→TIGHT
　　　

●気候チェッカー

(レシピ)※仮レシピです
 X
YZY
 X
X=カルセドニー各種
Y=金インゴット
Z=赤石
右クリックで使うと、クリック座標の5x5x5範囲内の熱・3x3x3範囲内の湿度･通気をチェックし、得られた気候情報を表示します。
また、現在の気候で変化するブロックをクリックした場合はメッセージが出ます。


○ハードモードの搭載
　プレイヤーにもPCにも優しくないため、デフォルトではすべてOFFです。
　お好みでご使用下さい。

　●Hardmode Vanilla Recipe
　　・WARM~HOT & WET
　　　砂->土、土->草ブロックへの自然変化が（まばらに）起こるように
　　　砂漠の枯れ草->樫の苗木に変化するように
　　・OVEN~KULN & DRY
　　　草ブロック->土、土->砂の自然変化
　　　苗木->枯れ草
　　・SMELTING~
　　　植物の自然発火
　　・INFERNO
　　　マテリアルがROCK、SAND、GROUND(つまりほとんどの地形構成ブロック)がまばらに融解して溶岩に変化していく

　●INFERNAL INFERNO
　　・ネザーの気温設定がINFERNOに
　　・火耐性モブの高温耐性を引き上げ、高温ダメージを完全無効化

　●Customized Spawn Rate
　　・Y=64に近いほど敵性モブのスポーン率が下がり、離れるほど高くなる
　　　Y=64ではスポーン率は0%、高度差64以上で100%
　　　地底や高山のスポーン率が相対的に上昇する

 ●Suffocation
　　・Airflow=TIGHTの場所では、水中と同じように窒息効果などのペナルティが発生するようになる。
　　　発生基準は頭の位置の座標で決まる点に注意。
　　　発生中は水中のようにFogやAirゲージが出現し、対策方法もバニラの水中活動と同じになる。

　●Anaerobic Underworld
　　・Y30以下の屋内が通気NORMALではなく通気TIGHTになります。
　　　Suffocationと組み合わせると、地下に潜るために水中呼吸ペナルティの対策が必要になります。
　　　反面、TIGHTが必要な金属精錬には有利になります。

○気候耐性設定
　防具アイテムとモブに対し、コンフィグファイルから耐性を設定できます。
　登録に使う名称は、レジストリネーム（NEIのダンプファイルなどで確認できる）を使用して下さい。
　書式はファイルに既登録の例を参考にして下さい。


○その他の仕様

　・バニラのジャンプ力増強ポーションで落下ダメージがなくなる効果
　・騎乗している乗り物MOBにポーション効果を分け与える機能
　・一部バニラアイテムに鉱石辞書名追加
　・アイテムのアナザーレシピ追加(骨粉、矢、火打ち石など)
　・ツールや防具のツールチップ拡張(耐久度、採掘レベル、気候耐性値が見える)

●地形生成への干渉要素
　バニラの地形生成などにも多少の介入を行っています。コンフィグでOFFにできるので、お好きに調整してご使用ください。

　・水中が少し明るくなる
　　バニラの水中FOGがきつすぎて水中建築が映えないので、水の透明度を変更。
　　海底から水面や遠景が十分見渡せるくらいに調整を行っています。

　・高湿バイオームでは地下に溶岩が生成しない
　　1.3.0より、溶岩湖や地下渓谷にも変更を加えているので、沼やジャングルでは溶岩が全く生成しなくなります。


### 更新履歴 ###

○1.6.1
 修正
 　・ベースインベントリのアイテム減少処理で、アイテムがきちんと消えない問題
 　・気候チェック時のチェック範囲設定が狭くなっている問題

○1.6.0
 1.12.1板の変更点の輸入
　　・マテリアル登録処理の共通化
　　・Itemのnullチェック処理　など

○1.5.17
　修正
 　・トルクマシンの回転速度計算の再調整
 　・鉱石系ブロックのベースモデルをもうちょっと手直し
 　・インベントリGUIを遠隔で開く場合の距離制限をつけた
 　・cavernと同時導入時の読み込み順調整

○1.5.16
　API
　　・金床でエンチャント付与するツールのAPIを追加

○1.5.15
　修正
　　・クロス系モデルの表示改善(Ferne氏に感謝)
　EX
　　・Utilクラスの便利メソッドを増やした(内部用の変更)

○1.5.14
 変更
 　・気温ダメージ発生時、画面にエフェクトが出るようになった
 　修正
 　・トルクマシンの回転量とトルク流量が正しく相関しなくなっていた

○1.5.13
　変更
　　・コンフィグで天候、季節による気候変化をOFFできるように
　　・コンフィグで日照りの頻度をマイナスにすると日照りをOFFできるように
　　・NBTセンシティブレシピ登録時、材料アイテムを1000mB以上入った液体容器に制限できるように

○1.5.12
　新規
　　・ShapedNBTRecipeを追加(NBT認識できるクラフトレシピクラス)

○1.5.11
　修正
　　・防具への気候耐性登録にワイルドカードが使えない不具合を修正

◯v1.5.10
　修正
　　・森林バイオームの溶岩湖削除イベントが不発だったので修正

◯v1.5.9
　変更
　　・森林の地上に溶岩湖を生成しない火事防止Eventの追加
　EX
　　・JEIでバイオームの情報を確認できるようにした

◯v1.5.8
　新規
　　・冷気耐性ポーション追加
　　・紡績レシピ
　変更
　　・FluidIDリストを昇順ソートした

◯v1.5.7
　変更
　　・気温判定に新たに季節変動を導入
　　・ハードモードにY30以下の屋内がTIGHTになるモードを追加
　修正
　　・コンソールログがアンノウンになっていた
　　・BlockSetのハッシュコード値がWorldによってズレる問題の修正
　API
　　・Biomeごとに季節変動の有無を設定する登録メソッドを追加

◯v1.5.6
　変更
　　・作物の成長促進条件を、作物の真下の土壌の湿度WETで判定
　　・日照りが長すぎたので下方修正
　EX
　　・zh_CN.lang更新(TartaricAsid氏より)

◯v1.5.5
　修正
　　・BakedModelのnullチェック忘れを修正
　　・JEIレシピ閲覧GUIの文字が見づらいので文字影を除去

◯v1.5.4
　変更
　　・トルク操作をCapability経由で出来るようにしてみた
　修正
　　・気候耐性登録APIの下位互換切れを直した

◯v1.5.3
　変更
　　・防具の気候耐性コンフィグをItemStack単位で登録する方式に変更

◯v1.5.2
　修正
　　・マルチで起動しない問題

◯v1.5.1
　修正
　　・化学反応レシピの動作修正
　　・液体Dic試作品の一致条件変更
　　・トルクレシピマシンのベース処理ちょっと改良

◯v1.5.0
　変更
　　・防具マテリアルの調整用コンフィグjsonファイル追加
　　・化学反応槽レシピまわりの追加とJEI対応
　　・トルク送信APIの送信方向をListに変えた
　EX
　　・zh_CN.lang追加(TartaricAsid氏に感謝!)

◯v1.4.4
　変更
　　・BiomeのDRY・WET判定条件に降雨量を追加した
　　・ハードモードに、通気TIGHT時の窒息を追加(水中と同じ挙動になる)
　修正
　　・ハードモードでの砂・土の緑化が気温NORMALでは起こらないようにした
　　・ハードモードのスポーン制御が働いてなかったので修正
　　・日照りの継続日数を減らした

◯v1.4.3
　EX
　　・JEIレシピ上の気候ゲージの右クリックで、気候パラメータによるレシピ検索が出来るようになった

◯v1.4.2
　変更
　　・レシピ選択の優先度をもう少し材料数重視にした

◯v1.4.1
　変更
　　・液体クラフトでは、より材料の多いレシピを優先的に選択するようにした
　　・食べ物Entityに0~31の描画用個体値をもたせた
　EX
　　・モブの気候耐性をJsonファイルで変更できるようにした
　API
　　・レシピAPIのverを1.0.5に

◯v1.4.0
　新規
　　・ハードモードを整備し、コンフィグで変更できる要素を増加させた
　変更
　　・Block更新の頻度や負荷対策の見直し
　　・PLANTマテリアルのブロックの通気性を上げた
　　・BlockUpdate時、Climateレシピでの変化に成功した場合に隣接ブロックの更新チャンスを増やす
　　・日照り発動に必要な晴天の日数をコンフィグ変更可能に
　修正
　　・BlockUpdateの頻度がうまくコンフィグ調整できていなかったのを修正
　API
　　・モブの気候ダメージ耐性を登録するAPIを追加
　　・気候ダメージ発生時Eventを追加
　　・気候算出時Eventを追加

◯v1.3.7
　新規
　　・バニラブロックの気候変化を増やしたハードモードを追加
　修正
　　・独自レシピ判定のミスを修正
　EX
　　・ItemStackのEmpty判定の差し替え

◯v1.3.6
　変更
　　・耕地がHaC標準のWET判定でも湿るようにした
　修正
　　・UtilのItem一致判定

○v1.3.5
　変更
　　・天候による気候変化をゆるやかにした
　　　　※天候変化から気候に影響が出るまで時間がかかるように。
　　　　※晴天が何日も続くと、断続的に日照りが発生して気温が上がるように。
　　・ClimateReceriveTileの鯖蔵同期方法をカスタムパケット方式に変更
　修正
　　・キーバインド確認時にクラッシュを起こすのを修正

○v1.3.4
　変更
　　・JEIで気候に影響するブロック(一部除く)を確認できるようにしてみた
　　　※ Airや炎ブロックなど、JEI上に表示されないものも多数あるため、すべてを網羅しているわけではありません。

○v1.3.3
　修正
　　・液体クラフトレシピ(再)
　　・液体タンクの動作改良
　　・トルクマシンのレシピ処理スピードを上げた

◯v1.3.2
　修正
　　・液体クラフトレシピの登録処理での不具合・及びJEI連携部分の不具合を修正
　　・レシピ置換機能のnullチェックミス修正

◯v1.3.1
　修正
　　・不要なJsonファイルの除去

◯v1.3.0
　変更
　　・Forge2185に対応
　　・JEI3.14.2のAPIに対応
　　・高湿バイオームの溶岩湖生成をキャンセルするEventの追加
　　・高湿バイオームでは地下峡谷底の溶岩も水になるように

◯v1.2.1
　修正
　　・JEI連携部分の手直し

◯v1.2.0
　変更
　　・トルクマシンの回転の制御方法を変更、モデル生成量を減らして軽量化を図る
　　・JEI対応部分の設定追加(マシンアイコンなど)
　　・FoodEntityのサイズを少し変更

◯v1.1.8
　変更
　　・キーバインド処理でのクラッシュを回避、及び設定コンフィグの追加

◯v1.1.7
　変更
　　・ソウルサンドにDRYパラメータを付与
　　・トルクマシンの回転速度制限を変更
　修正
　　・JEIレシピ閲覧時、湿度と通気の部分にマウスオーバーしても名前が表示されなかった
　　・レシピ変換システムを少し修正

○v1.1.6
　修正
　　・DRYバイオームに降雨があった場合に湿度が上がらないのを修正
　　・NPE対策が欠けている部分を修正
　API
　　・IHeatCancelerインターフェイスの追加(特殊目的のため汎用性なし)

◯v1.1.5
　変更
　　・NPE回避やログイン直後の読み込み遅延処理など

◯v1.1.4
　修正
　　・起動不能に陥ったので緊急アプデ

○v1.1.3
　変更
　　・BiomeへのClimate登録をdimension別にできるようにした
　　・CoreModの読み込み順を激遅指定
　修正
　　・PolarBearが寒冷耐性を持っていなかった
　　・WARM要求レシピがNORMALで動かないのを修正
　　・ClimateCalculatorにいくつかのNPEチェックを付けた

◯v1.1.2
　修正
　　・CoreModの読み込み順を遅めに指定してみた

◯v1.1.1
　変更
　　・熱源ブロックとの間に固形ブロックの壁がある場合、材質によっては断熱効果が発生するようにした
　　・断熱効果を持つブロックのためIThermalInsulationBlockインターフェイスをAPIに追加

◯v1.1.0
　　・MC1.10.2、Forge2094への移行
　変更
　　・1.10.2追加ブロックの一部に気候パラメータを付与
　修正
　　・移行に伴いJEI対応部分の変更点を修正
　　・気候ダメージのハートマークが実際のダメージ量とずれていたのを修正
　　・Json生成クラスの生成ファイル名修正
　　・トルクマシン回転速度をちょっと落とした

◯v1.0.5
　変更
　　・KILN以上の気候ダメージはアンデッド特攻になった
　　・ClimateCropにも気温WARM・HOTの成長加速が適用されるようにした
　修正
　　・ブロックの気候変化が起こらないことがあったのを修正(耕地の湿りなど)

◯v1.0.4
　変更
　　・HeatTierの段階をより細分化、COLDとHOTの間にあるTierを増やした
　修正
　　・負荷増加につながりやすい多くの処理を見直し・差し替え
　　・一部バニラブロックの気候変化を廃止(バニラ追加石など)

◯v1.0.3
　変更
　　・ベースクラスでのデフォルトのクリエイティブタブ追加を廃止(モジュール化に向けて変更)
　　・NoSkyディメンションでは屋根判定の範囲を狭くした
　　・Climateパラメータのカラー参照メソッドを増やした
　　・夜雨での気温低下を廃止(クライアント側の夜判定の不一致のため)
　　・Humidity:Normalの文字カラーを調整
　　・水中の暗さとFogをマシにする機能の追加
　修正
　　・BlockModelJsonのshade設定を修正

◯v1.0.2
　変更
　　・羊も寒冷耐性を高く持つように
　　・IClimateObjectをEventからのブロック更新対象から除外
　　・Millレシピ・液体レシピのデフォルトの副生物発生確率を100%にした
　　・Millレシピが材料のコンテナアイテムを返却するように
　　・バニラの肉類と魚に鉱石辞書名を付けた
　　・Entity食べ物は、スニーククリック時は右クリック回収しないようにした
　修正
　　・トルクマシンの方向がちぐはぐだったのを修正
　　・レシピの副生成物判定が不完全だったのを修正
　　・チャームを持っていなくてもXキーで効果音が鳴るのを修正
　　・FoodEntityの衝突挙動を少し修正
　　・修正に伴いAPIのバージョンカウントを上げた

○v1.0.1
　変更
　　・HUDのハートマークにプレイヤーの気候耐性値を反映させた
　　・Y高度の高い上空では、バイオームにかかわらずWINDが得られるようにした
　修正
　　・Humidity、Airflowの索敵範囲がコンフィグからうまく拾えない問題の修正

○v1.0.0
 　変更
　　・気候判定時、光を完全透過するブロックや固形でないブロックを屋根と見なさないようにした
　　・液体アイテムの操作用お助けクラスの新設
　修正
　　・液体クラフトレシピのアウトプット判定ミス
　API
　　・バージョンカウントを正式版に

○v0.9.9
　新規追加
　　・気候作物のベース
　　・FluidRecipeとJEI対応
　　・FluidTankのベース
　　・Fluidの数値IDを保持するシステム追加
　　・気候作物のベースクラス追加
　　・気候作物にJEIレシピ表示を使った情報確認を追加
　変更
　　・気候のチェック範囲をコンフィグで変えられるように
　　・一部APIに、Load完了済みかどうかの判定を付けた
　　・FoodEntityの動作改善
　　・JsonBakeryイベントにCrop型を追加
　　・ClimateTileが現在の最高・最低気温も保持するようにした
　修正
　　・コンテナ系ブロックのテクスチャ指定ミスの修正
　　・複数スロットを扱うレシピのインベントリ一致判定の修正
　　・一部の常時効果系チャームが働かないのを修正
　　・気候チェッカーがサーバーとクライアントで異なる値を返していた
　　・不要なデバッグログの削除

○v0.9.3
　変更
　・消費型チャームの破壊時に効果音が鳴るようにした
　修正
　・モデル関係をサーバーサイドで読み込んでしまうクラッシュの修正
　・耐久値がなくなってもチャームを消費しないのを修正

○v0.9.2
　変更
　・コンフィグファイルを分割
　・ネザーやエンドでは風の向きを西風ではなく上昇気流にした

○v0.9.1
追加
　・FluidTankのベース(仮)
修正
　・バニラのアナザーレシピの一部を削除
　・レシピ自動変換システムの調整(うまく動いていないので保留中)
　・アクセサリーの攻撃ヒット時効果の無限ループ対策

○v0.9.0 β公開

